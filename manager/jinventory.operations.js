function printreport(){var e=window.open("view/w-report.html","_blank");e.onload=function(){var t=new Date,n=t.getDate(),i=t.getMonth()+1,a=t.getFullYear();10>n&&(n="0"+n),10>i&&(i="0"+i),t=a+"-"+i+"-"+n,e.document.getElementById("rtitle").innerHTML="INVENTARIO",e.document.getElementById("rdate").innerHTML="Fecha: "+t,e.document.title="inventario"+t;var r=document.getElementById("tableinventory").lastChild,o=r.cloneNode(!0);e.document.getElementById("tablereport").appendChild(o),e.document.getElementById("tablereport").deleteTHead(),e.print(),e.close()}}function seerowinventoryclass(e){var t=e.id.split("_");$("#nomcategory").val($("#NOMBREPRODUCTO_"+t[1]).text()),$("#inventoryprice1").val($("#VCONTADOINVENTARIO_"+t[1]).text()),$("#inventoryprice2").val($("#VCREDITOINVENTARIO_"+t[1]).text()),$("#inventorycant").val($("#LIMITEENINVENTARIO_"+t[1]).text())}function editrowinventory(e){var t=e.id.split("_");$("#NOMBREPRODUCTO_"+t[1]).dblclick()}function delrowinventory(e){var t=e.id.split("_")[1],n=$("#NOMBREPRODUCTO_"+t).text(),i="idinventory="+t+"&inventory="+n;$.ajax({type:"POST",url:"core/a-inventory.php",data:i,cache:!1,success:function(e){var t=jQuery.parseJSON(e);t.result&&(printInventoryMessage("","LA CATEGORIA "+n+" HA SIDO ELIMINADO"),setTimeout(function(){$("#area").load("view/w-inventory.php")},1e3))}})}function updateRowInventory(e,t){var n=e.split("_"),i="field="+n[0]+"&idinventory="+n[1]+"&value="+t;$.ajax({type:"POST",url:"core/a-inventory.php",data:i,cache:!1,success:function(e){var t=jQuery.parseJSON(e);t.result&&printInventoryMessage("","LA CATEGORIA HA SIDO ACTUALIZADA")}})}function changeInventory(){if("1"===$("#inventorymove").val()){if(null!=$("#inventorycat").val()&&""!=$("#inventoryqua").val()&&""!=$("#inventoryfield1").val()&&""!=$("#inventoryfield2").val()){var e="idcategory="+$("#inventorycat").val()+"&quantity="+$("#inventoryfield1").val()*$("#inventoryfield2").val()*$("#inventoryqua").val();$.ajax({type:"POST",url:"core/a-inventory.php",data:e,cache:!1,success:function(e){var t=jQuery.parseJSON(e);t.result&&(printInventoryMessage("","CANTIDADES ACTUALIZADAS"),setTimeout(function(){$("#area").load("view/w-inventory.php")},1e3))}})}}else if("2"===$("#inventorymove").val()&&null!=$("#inventorycat").val()&&""!=$("#inventoryfield1").val()&&""!=$("#inventoryfield2").val()){var e="idcategory="+$("#inventorycat").val()+"&price1="+$("#inventoryfield1").val()+"&price2="+$("#inventoryfield2").val();$.ajax({type:"POST",url:"core/a-inventory.php",data:e,cache:!1,success:function(e){var t=jQuery.parseJSON(e);t.result&&(printInventoryMessage("","PRECIOS ACTUALIZADOS"),setTimeout(function(){$("#area").load("view/w-inventory.php")},1e3))}})}}function addNewCategory(e){var t="nomcategory="+$("#nomcategory").val()+"&inventoryprice1="+$("#inventoryprice1").val()+"&inventoryprice2="+$("#inventoryprice2").val()+"&inventorycant="+$("#inventorycant").val();return""==$("#nomcategory").val()||""==$("#inventoryprice1").val()||""==$("#inventoryprice2").val()||""==+$("#inventorycant").val()?void printInventoryMessage("error","LA CATEGORIA NO HA SIDO CREADA FALTAN CAMPOS"):($.ajax({type:"POST",url:"core/a-inventory.php",data:t,cache:!1,success:function(e){var t=jQuery.parseJSON(e);t.result&&(printInventoryMessage("","NUEVA CATEGORIA <b>"+$("#nomcategory").val()+"</b> HA SIDO CREADA"),setTimeout(function(){$("#area").load("view/w-inventoryclass.php")},1e3))}}),void e.preventDefault)}function printInventoryMessage(e,t){$("#inventorymessage").html("warning"===e?"<span style='padding:3px;width: 100%; height:20px; background: url(shared/thumbs/bgwarning_lg.jpg);border-radius:10px;display:block' id='message'>"+t+"</span>":"error"===e?"<span style='color:white;padding:3px;width: 100%; height:20px; background: url(shared/thumbs/bgerror_lg.jpg);border-radius:10px;display:block' id='message'>"+t+"</span>":"<span style='padding:3px;width: 100%; height:20px; display:block;border-radius:10px' id='message'> "+t+"</span>"),setInterval(function(){$("#message").fadeOut()},3e3)}$(document).ready(function(){$("#exportreport").click(function(){$("#datos_a_enviar").val($("<div>").append($("#tableinventory").eq(0).clone()).html()),$("#nameexport").val("inventario"),$("#FormularioExportacion").submit()})}),$("#tableinventory").each(function(){var e=0,t=10,n=$(this);n.bind("repaginate",function(){n.find("tbody tr").hide().slice(e*t,(e+1)*t).show()}),n.trigger("repaginate");for(var i=n.find("tbody tr").length,a=Math.ceil(i/t),r=$('<div class="pager"></div>'),o=0;a>o;o++)$('<span class="page-number"></span>').text(o+1).bind("click",{newPage:o},function(t){e=t.data.newPage,n.trigger("repaginate"),$(this).addClass("active").siblings().removeClass("active")}).appendTo(r).addClass("clickable");r.insertAfter(n).find("span.page-number:first").addClass("active")}),$("#inventoryfield1").on("input",function(){var e=$(this);$.isNumeric(e.val())||$(this).val("")}),$("#inventoryfield2").on("input",function(){var e=$(this);$.isNumeric(e.val())||$(this).val("")}),$("#inventoryqua").on("input",function(){var e=$(this);$.isNumeric(e.val())||$(this).val("")}),$("#inventoryprice1").on("input",function(){var e=$(this);$.isNumeric(e.val())||$(this).val("")}),$("#inventoryprice2").on("input",function(){var e=$(this);$.isNumeric(e.val())||$(this).val("")}),$("#inventorycant").on("input",function(){var e=$(this);$.isNumeric(e.val())||$(this).val("")}),$(function(){$("td.editable").dblclick(function(){var e=$(this).text(),t=event.target.id;$(this).addClass("cellEditing"),$(this).html("<input id='celledit' type='text' value='"+e+"' style='width:"+$(this).innerWidth()+"px;height:15px;'  />"),$(this).children().first().focus(),$(this).children().first().keypress(function(e){if(13==e.which){var n=$(this).val();$(this).parent().text(n),$(this).parent().removeClass("cellEditing"),updateRowInventory(t,n)}}),$(this).children().first().focusout(function(){var e=$(this).val();$(this).parent().text(e),$(this).parent().removeClass("cellEditing"),updateRowInventory(t,e)}),$(this).children().first().blur(function(){$(this).parent().text(e),$(this).parent().removeClass("cellEditing")})})}),$("#inventorymove").change(function(){"1"===$("#inventorymove").val()?($("#inventorymessage").text("ACTUALIZANDO CANTIDADES"),$("#lblwidth").text("ANCHO:"),$("#lbllong").text("LARGO:"),$("#rowquant").show()):"2"===$("#inventorymove").val()&&($("#inventorymessage").text("CAMBIANDO PRECIOS"),$("#lblwidth").text("PRECIO DE CONTADO:"),$("#lbllong").text("PRECIO A CREDITO:"),$("#rowquant").hide())});